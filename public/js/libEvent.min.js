var Lib=Lib||{};Lib.Event={globalListeners_:{},delegatedListenerKeys_:{},delegatedListeners_:{},listenOnClass:function(a,c,d,b){if(!this.delegatedListeners_[a]){this.delegatedListeners_[a]={};document.body.addEventListener(a,this.globalListener_.bind(this),true)}if(!this.delegatedListeners_[a][c]){this.delegatedListeners_[a][c]=[]}eventKey=Lib.uuid();this.delegatedListeners_[a][c].push(eventKey);if(b){d=d.bind(b)}this.delegatedListenerKeys_[eventKey]=d;return eventKey},unlistenByKey:function(b){loop:for(var a in this.delegatedListeners_){for(var c in this.delegatedListeners_[a]){if(this.delegatedListeners_[a][c]==b){delete this.delegatedListeners_[a][c];if(Object.keys(this.delegatedListeners_[a]).length==0){delete this.delegatedListeners_[a]}break loop}}}delete this.delegatedListenerKeys_[b]},unlistenByClass:function(c){var b;loop:for(var a in this.delegatedListeners_){for(var d in this.delegatedListeners_[a]){if(d==c){b=this.delegatedListeners_[a][d];delete this.delegatedListeners_[a][d];if(Object.keys(this.delegatedListeners_[a]).length==0){delete this.delegatedListeners_[a]}break loop}}}delete this.delegatedListenerKeys_[b]},globalListener_:function(d){if(!this.delegatedListeners_[d.type]){return}for(className in this.delegatedListeners_[d.type]){var c=Lib.getAncestor(d.target,className);if(!c){continue}var e=this.delegatedListeners_[d.type][className];for(var b=0,a=e.length;b<a;b++){cb=this.delegatedListenerKeys_[e[b]];if(cb){cb(d)}}}}};