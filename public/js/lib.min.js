"use strict";var Lib={CARD_ACTION_CLASSES_BLACKLIST_:["linkLeft","linkRight","dataLink","headerCardAction","headerCardActionInMenu","headerCardActionInMenuOnly",],modalListeners_:{},uuid:function(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},getAncestor:function(b,a){var c=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;if(c.call(b,"."+a)){return b}if(!b.parentElement){return null}return this.getAncestor(b.parentElement,a)},onHeaderCardMenuClick:function(c){var b=this.getAncestor(c.target,"cardWrapper");var h=b.getElementsByClassName("headerCardActionInMenu");var j=[];for(var f=0,e=h.length;f<e;f++){var n=this.getActionList(h[f]);j=j.concat(n)}var k=document.createElement("ul");k.classList.add("modalList");for(var f=0,e=j.length;f<e;f++){var p=document.createElement("li");var o=document.createElement("a");o.setAttribute("href",j[f].href);o.setAttribute("class",j[f].className);var q=document.createTextNode(j[f].label);o.appendChild(q);p.appendChild(o);k.appendChild(p)}var g="actionMenu";var d=this.getModalContentEl(g);d.innerHTML="";d.appendChild(k);this.showModal(g)},maybeGetAttributesFromElement:function(b){var c=[];if(!b.hasAttribute("href")||b.hasAttribute("aria-hidden")){return c}var a;if(b.hasAttribute("aria-label")){a=b.getAttribute("aria-label")}else{if(b.hasAttribute("title")){a=b.getAttribute("title")}else{a=b.innerText}}if(a.length==0){return c}c.push({href:b.getAttribute("href"),label:a,className:b.className.split(" ").filter(function(d){return this.CARD_ACTION_CLASSES_BLACKLIST_.indexOf(d)==-1},this).join(" ")});return c},getActionList:function(d){if(d.tagName=="A"){return this.maybeGetAttributesFromElement(d)}else{var e=[];var b=d.getElementsByTagName("a");for(var c=0,a=b.length;c<a;c++){e=e.concat(this.maybeGetAttributesFromElement(b[c]))}return e}},getModalContentEl:function(a){return document.getElementById("modalContent-"+a)},showModal:function(f){if(!f){return}var e=document.getElementById("overlay");var d=this.getModalContentEl(f);var b=e.getElementsByClassName("modalContentItem");for(var c=0,a=b.length;c<a;c++){if(b[c]===d){b[c].classList.add("visible")}else{b[c].classList.remove("visible")}}e.classList.add("visible");if(this.modalListeners_.close){Lib.Event.unlistenByKey(this.modalListeners_.close);delete this.modalListeners_.close}this.modalListeners_.closeClick=Lib.Event.listenOnClass("click","close",function(g){this.dismissModal()},this);e.addEventListener("click",(function(g){if(g.target==e){this.dismissModal()}}).bind(this));document.body.addEventListener("keyup",this.onModalKeyPress.bind(this),true)},onModalKeyPress:function(a){if(a.keyCode==27){this.dismissModal()}},dismissModal:function(){Lib.Event.unlistenByKey(this.modalListeners_.closeClick);delete this.modalListeners_.closeClick;document.removeEventListener("keyup",this.onModalKeyPress);var a=document.getElementById("overlay");a.removeEventListener("click",this.dismissModal);a.classList.remove("visible")}};