var Lib=Lib||{};Lib.Form={ucfirst:function(b){b+="";var a=b.charAt(0).toUpperCase();return a+b.substr(1)},submitHandler:function(d){if(typeof(tinyMCE)!="undefined"){tinyMCE.triggerSave()}var j=d.elements;var a=true;if(typeof this.Forms=="undefined"){return a}var n=(d.id)?d.id:"form";var m=this.Forms[n];for(var l in m){var g=d[l];var k=m[l];var b=true;var o=[];for(var f in k){var e=k[f].name;if(typeof(this.validators[e])=="undefined"){continue}var h=this.validators[e](g,k[f].parameters,k[f].messages);if(h&&h.length!=0){b=false;o.push(h);if(k[f].breakChainOnFailure){break}}}if(g.disabled){b=true;o=[]}this.updateError(g,b,o);if(!b){a=false}}return a},updateError:function(b,a,d){if(a){$("#"+b.id+"Error").html("").css("display","none")}else{var c=this.ucfirst(d.join(", "));$("#"+b.id+"Error").css("display","none").html(c).fadeIn("def")}},validators:{id0:function(b,d,c){if(d.allowWhiteSpace){var a=b.value.match(/^[a-z0-9\s]*$/i)}else{var a=b.value.match(/^[a-z0-9]*$/i)}return(a)?"":c.notAlnum},id1:function(b,d,c){if(d.allowWhiteSpace){var a=b.value.match(/^[a-z\s]*$/i)}else{var a=b.value.match(/^[a-z]*$/i)}return(a)?"":c.notAlpha},id2:function(a,c,b){var d="";if(c.inclusive){if(a.value<c.max&&a.value>c.min){return""}d=b.notBetweenStrict}else{if(a.value<=c.max&&a.value>=c.min){return""}d=b.notBetween}d=d.replace("%value%",a.value);d=d.replace("%min%",c.min);d=d.replace("%max%",c.max);return d},id3:function(b,d,c){if(b.value.length==0){return""}var a=b.value.match(d.regex);return(a)?"":c.dateInvalid},id4:function(b,d,c){var a=b.value.match(/^[0-9]*$/i);return(a)?"":c.notDigits},id5:function(c,e,d){var a=new RegExp(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.([a-z]){2,4})$/i);var b=a.exec(c.value);return(b)?"":d.emailAddressInvalid},id6:function(b,d,c){var a=(b.value==parseFloat(b.value));return(a)?"":c.notFloat},id7:function(b,d,c){var a=(b.value>d.min);return(a)?"":c.notGreaterThan},id8:function(a,c,b){return""},id9:function(a,c,b){return""},id10:function(b,d,c){if(!b.value){return""}for(var a=0;a<d.haystack.length;a++){if(b.value==d.haystack[a]){return""}}return c.notInArray},id11:function(b,d,c){if(b.value.length==0){return""}var a=(b.value==parseInt(b.value)&&b.value==parseFloat(b.value));return(a)?"":c.notInt},id12:function(b,d,c){var a=(b.value<d.max);return(a)?"":c.notLesserThan},id13:function(b,d,c){var a=(b.value.length>0);return(a)?"":c.isEmpty},id14:function(c,e,d){var a=new RegExp(e.regex);var b=a.exec(c.value);return(b)?"":d.regexNotMatch},id15:function(a,c,b){if(a.value.length>c.max){return b.stringLengthTooLong}if(a.value.length<c.min){return b.stringLengthTooShort}return""},id16:function(b,d,c){var e=$("#"+d.reference).get(0).value;var a=(b.value==e);return(a)?"":c.notSame},id17:function(a,c,b){return""},id18:function(a,c,b){return""},id20:function(a,c,b){if(a.value.length==0||a.value=="0"){return b.locationRequired}return""}},ajaxValidationHandler:function(a,b,d,c){if(typeof(this.ajaxValidators[b])=="undefined"){return}this.ajaxValidators[b](a,d,c)},ajaxValidators:{id0:function(a,b,d){var c={};c[a.id]=a.value;$.get(d.route,c,function(g,e){var f=[];for(var h in g.messageNames){f.push(b[g.messageNames[h]])}Lib.Form.updateError(a,g.status,f)},"json")},id1:function(a,b,d){var c={};c[a.id]=a.value;c.userId=d.userId;$.get(d.route,c,function(g,e){var f=[];for(var h in g.messageNames){f.push(b[g.messageNames[h]])}Lib.Form.updateError(a,g.status,f)},"json")},id2:function(a,b,d){var c={};c[a.id]=a.value;c.userId=d.userId;$.get(d.route,c,function(g,e){var f=[];for(var h in g.messageNames){f.push(b[g.messageNames[h]])}Lib.Form.updateError(a,g.status,f)},"json")},id3:function(b,c,e){var d={};d[b.id]=b.value;var a=function(){$.get(e.route,d,function(h,f){var g=[];for(var i in h.messageNames){g.push(c[h.messageNames[i]])}Lib.Form.updateError(b,h.status,g)},"json")};setTimeout("deferredCheck",1000)}}};